<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"> 

<h:head>
	<link rel="stylesheet" href="carrito.css"></link>	
	<link rel="stylesheet" href="menuSuperior.css"></link>	
</h:head> 
<body> 
		<div id="header">
			<h1 class="titulo">Carro de compras</h1>
			<h:button  outcome="signup" class="authButton" type="button" value="Registrarse" icon="pi pi-check" rendered="#{delegadoBean.userFound eq null}"/>
			<h:button outcome="signin" class="authButton" type="button" value="Ingresar" icon="pi pi-check" rendered="#{delegadoBean.userFound eq null}"/>
			
			<div class="card">
			    <h:form>
			        <p:growl id="messages" showDetail="true"/>
					
			        <p:menuButton value="#{delegadoBean.userFound.correo}" rendered="#{delegadoBean.userFound ne null}">
			            <p:menuitem value="Pedidos" outcome="misPedidos" update="messages" icon="pi pi-bell"/>
			            <p:menuitem value="Mi cuenta" action="#{menuView.delete}" update="messages" icon="pi pi-user"/>
			            <p:divider/>
			            <p:menuitem value="Salir" action="#{delegadoBean.cerrarSesion()}"  icon="pi pi-external-link"/>
			        </p:menuButton>
			    </h:form>
			</div>
			<p:commandButton action="carrito?faces-redirect=true"  icon="pi pi-shopping-cart" style="color:white;background-color: #006491; border-style: none;"/>
		</div>
		
	<p:dataView var="product" value="#{carritoBean.pedido.productos}" rows="12">
            <p:dataViewListItem>
                <div class="product-list-item">
                    <img  width="130" height="130" class="imgProduct" src="https://www.petitchef.es/imgupl/recipe/club-sandwich-americano--459975p722167.jpg"/>
                    <div class="product-list-detail">
                        <div class="product-name text">#{product.nombreProducto}</div>
                        <div class="product-description text">#{product.descripcion}</div>
                        <div class="text">30 cm</div>
                       <div class="text">Cantidad: 2</div>
                    </div>
                    <div class="product-list-action">
                        <h:outputText value="#{product.precio}" style="font-weight: 900;font-size: x-large;">
                            <f:convertNumber currencySymbol="$" type="currency"/>
                        </h:outputText>
                        <p:commandButton 
                        	type="submit"
                            value="Eliminar"
                            icon="pi pi-trash"
                            action="#{carritoBean.eliminarProducto()}"
                                         >
                        	<f:setPropertyActionListener target="#{carritoBean.producto}" value="#{product}" />
                        </p:commandButton>
                    </div>
                </div>
            </p:dataViewListItem>
        </p:dataView>
        
        <div class="pagar">
        	
        	<h:outputText value="Total: $#{carritoBean.pedido.precioTotal}"></h:outputText>
           <p:commandButton
        	value="Pagar"
        	icon="pi pi-sign-in"
        	style="font-size: x-large;"
        	action="#{carritoBean.confirmarPedido()}"
        	/>   
        </div>

</body> 
</html>
